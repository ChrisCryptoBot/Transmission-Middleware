# Transmissionâ„¢ User Constraints Configuration
# Smart defaults derived from user profile, editable with safeguardrails

constraints:
  # Capital & Risk Management
  capital:
    max_risk_per_trade_pct: 0.5      # % of equity (default 0.5%, max 2%)
    dll_fraction_per_trade: 0.10      # 10% of Daily Loss Limit (max 10%)
    max_position_size_pct: 5.0        # Max position size as % of equity (max 10%)
    
  # Trading Cadence
  cadence:
    max_trades_per_day: 1              # Max trades per day (default 1, max 10)
    max_trades_per_week: 5             # Max trades per week (default 5, max 50)
    trading_sessions_ct:               # Trading hours (CT timezone)
      - "08:30-11:00"                  # Morning session
      - "13:00-15:00"                  # Afternoon session (optional)
    news_blackout_minutes: [30, 30]   # [before, after] high-impact news events
    
  # Quality Gates
  quality_gates:
    max_spread_ticks: 2                # Max spread in ticks (default 2, max 5)
    max_est_slippage_ticks: 2          # Max estimated slippage (default 2, max 5)
    max_latency_ms: 150                # Max execution latency (default 150ms, max 500ms)
    min_liquidity_depth: 3.0           # Min order book depth (default 3.0)
    
  # Compliance Profile
  compliance_profile: "generic"        # Options: generic, topstep, apex, ftmo, myforexfunds
  # Profile-specific overrides (if needed)
  profile_overrides:
    # topstep:
    #   dll_fraction_per_trade: 0.05
    #   max_trades_per_day: 2
    
  # Psychology & Mental State
  psychology:
    min_mental_state: 3                # Min mental state to trade (1-5, default 3)
    post_drawdown_stepdown_r_pct: 50   # Step down size after drawdown (%)
    consecutive_loss_reduction: 0.75    # Reduce size after N consecutive losses
    
  # Allowed Symbols
  allowed_symbols:
    - "MNQ"                            # Micro E-mini Nasdaq-100
    # - "MES"                          # Micro E-mini S&P 500
    # - "MYM"                          # Micro E-mini Dow
    
  # Non-bypassable Safeguardrails (system-enforced, cannot be disabled)
  safeguardrails:
    max_risk_per_trade_pct_ceiling: 2.0    # Hard ceiling: never exceed 2% per trade
    dll_fraction_per_trade_ceiling: 0.10   # Hard ceiling: never exceed 10% of DLL
    auto_flat_daily_loss_r: -2.0            # Auto-flat at -2R daily (non-bypassable)
    auto_flat_weekly_loss_r: -5.0           # Auto-flat at -5R weekly (non-bypassable)
    min_mental_state_floor: 1               # Minimum mental state (cannot go below 1)
    max_spread_ticks_ceiling: 5             # Hard ceiling: never exceed 5 ticks spread
    max_trades_per_day_ceiling: 10          # Hard ceiling: never exceed 10 trades/day

